<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAPOLKA</title>
    <link rel="stylesheet" href="./css/slyle.css">
</head>
<body>
    <div class="container">
        <div class="boxgm">
            <div class="user-info">
                <img id="userPhoto" alt="Аватар пользователя">
                <div>
                    <span class="user-name" id="userName">Имя пользователя</span>
                    <p class="user-status">Статус: Бомж</p>
                </div>
            </div>
            <div class="lega">
                <a href="">
                    <img src="./img/Trophy.png" alt="lega">
                    <p class="legaa">Лига</p>
                </a>
            </div>
        </div>
        <div class="box">
            <div class="card">
                <div class="card-map">
                    <img src="./img/image 2.png" alt="">
                </div>
                <div class="card-about">
                    <img src="./img/MasterCard.png" alt="">
                    <p class="nubmer-card">.... 3052</p>
                    <div class="balanse-card">
                        <p class="balanse-card" id="balance">Баланс: 0 Coins</p>
                    </div>
                    <div class="datecar">
                        <div class="date-card-maus">
                            <p class="date-maus">
                                D/M
                            </p>
                        </div>
                        <div class="date-card-dm">
                            <p class="date-dm">
                                07/30
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="info-games">
                <div class="info-box">
                    <div class="box-pribl">
                        <p class="priblclick" id="profitClick">Прибыль за клик <br>+1</p>
                    </div>
                    <div class="box-statusnext">
                        <p class="nexststasus" id="nextStatus">Следующий статус <br>100 000</p>
                    </div>
                    <div class="box-priblchas">
                        <p class="priblchas" id="profitHour">Прибыль в час <br>+0</p>
                    </div>
                </div>
            </div>
            <div class="circle">
                <img src="./img/image 3.png" id="circle" alt="Картинка внутри круга">
            </div>
            <div class="energi">
                <img src="./img/Low Battery.png" >
                <p class="energia">1000/1000</p>
            </div>
        </div>
    </div>



    <script src="./js/click.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const tg = window.Telegram.WebApp;

        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
    const user = tg.initDataUnsafe.user;

    document.getElementById('userName').textContent = user.first_name;

    console.log(user);

    if (user.photo_url) {
        const userPhoto = document.getElementById('userPhoto');
        
        fetch(user.photo_url)
            .then(response => {
                if (response.ok) {
                    userPhoto.src = user.photo_url;
                    userPhoto.style.display = 'block'; 
                } else {
                    console.log('Ошибка загрузки фото:', response.status);
                }
            })
            .catch(error => {
                console.error('Ошибка загрузки фото:', error);
            });
    }
} else {
    document.getElementById('userName').textContent = "Гость";
    console.log("Данные пользователя не найдены.");
}

    </script>
</body>
</html>
